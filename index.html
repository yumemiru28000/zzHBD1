<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wooden Wine Box</title>
  <style>
    :root{
      --bg1:#0f1220;
      --bg2:#1b1f36;
      --wood1:#7a4a2a;
      --wood2:#5f361f;
      --wood3:#8b5833;
      --metal:#c8b38a;
      --ink:#f5f0e6;
      --shadow: rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 600px at 50% 20%, #2a2f55 0%, transparent 60%),
        linear-gradient(160deg,var(--bg1),var(--bg2));
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      color:#fff;
    }

    /* --- Scene --- */
    .scene{
      width:min(92vw, 760px);
      height:min(78vh, 520px);
      display:grid;
      place-items:center;
      perspective: 1200px;
      position:relative;
    }

    .hint{
      position:absolute;
      bottom:14px;
      left:50%;
      transform:translateX(-50%);
      font-size:14px;
      opacity:.85;
      background: rgba(0,0,0,.25);
      padding:8px 12px;
      border-radius: 999px;
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,.12);
      user-select:none;
    }

    /* --- Box group --- */
    .box{
      width: 440px;
      height: 300px;
      position:relative;
      transform-style: preserve-3d;
      filter: drop-shadow(0 30px 26px var(--shadow));
    }

    /* Base (outer body) */
    .base{
      position:absolute;
      inset:0;
      border-radius: 14px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.08), transparent 30%),
        linear-gradient(135deg, var(--wood3), var(--wood1) 45%, var(--wood2));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow:
        inset 0 0 0 2px rgba(0,0,0,.12),
        inset 0 18px 30px rgba(0,0,0,.25);
      overflow:hidden;
    }

    /* wood grain */
    .base::before{
      content:"";
      position:absolute;
      inset:-40px;
      background:
        repeating-linear-gradient(
          95deg,
          rgba(0,0,0,.10) 0px,
          rgba(0,0,0,.10) 2px,
          rgba(255,255,255,.04) 6px,
          rgba(255,255,255,.02) 10px
        );
      mix-blend-mode: overlay;
      opacity:.55;
      transform: rotate(-2deg);
      pointer-events:none;
    }

    /* inner cavity (visible when lid opens) */
    .inner{
      position:absolute;
      left:22px; right:22px;
      top:26px; bottom:22px;
      border-radius: 12px;
      background:
        radial-gradient(120% 120% at 40% 0%, rgba(255,255,255,.12), transparent 55%),
        linear-gradient(180deg, #2a1b12, #1b120d);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.10),
        inset 0 18px 40px rgba(0,0,0,.55);
      transform: translateZ(1px); /* keep above base fill */
      overflow:hidden;
      opacity:.95;
    }

    /* wine art inside */
    .wine{
      position:absolute;
      width: 180px;
      height: 200px;
      left:50%;
      top:56%;
      transform: translate(-50%,-50%) rotate(-6deg);
      opacity: 0;
      transition: opacity 520ms ease;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.5));
    }
    .box.open .wine{ opacity: 1; }

    /* Lid (top face that opens) */
    .lid{
      position:absolute;
      left: 10px;
      right: 10px;
      top: 8px;
      height: 140px;
      transform-style: preserve-3d;
      transform-origin: left center; /* left as hinge */
      transform: translateZ(26px) rotateY(0deg);
      transition: transform 700ms cubic-bezier(.2,.8,.2,1);
      cursor:pointer;
    }

    /* slightly lifted when closed */
    .lid::after{
      content:"";
      position:absolute;
      inset:-10px -10px -18px -10px;
      border-radius: 16px;
      background: transparent;
    }

    .box.open .lid{
      transform: translateZ(26px) rotateY(-125deg);
    }

    /* top surface (front) */
    .lid .face{
      position:absolute;
      inset:0;
      border-radius: 12px;
      backface-visibility: hidden;
      border: 1px solid rgba(255,255,255,.14);
      overflow:hidden;
    }

    .lid .top{
      background:
        linear-gradient(180deg, rgba(255,255,255,.10), transparent 35%),
        linear-gradient(135deg, #9a6a3f, #7b4b2b 55%, #5e351f);
      box-shadow:
        inset 0 0 0 2px rgba(0,0,0,.10),
        inset 0 18px 26px rgba(0,0,0,.25);
    }
    .lid .top::before{
      content:"";
      position:absolute;
      inset:-40px;
      background:
        repeating-linear-gradient(
          88deg,
          rgba(0,0,0,.12) 0px,
          rgba(0,0,0,.12) 2px,
          rgba(255,255,255,.045) 7px,
          rgba(255,255,255,.02) 12px
        );
      mix-blend-mode: overlay;
      opacity:.55;
      transform: rotate(2deg);
      pointer-events:none;
    }

    /* underside (back) with writable text area */
    .lid .underside{
      transform: rotateY(180deg);
      background:
        radial-gradient(120% 140% at 30% 0%, rgba(255,255,255,.08), transparent 55%),
        linear-gradient(135deg, #5a341f, #3f2416);
      display:grid;
      place-items:center;
      padding: 14px;
    }

    .note{
      width: 92%;
      height: 88%;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(10,10,10,.25);
      box-shadow: inset 0 10px 24px rgba(0,0,0,.35);
      color: var(--ink);
      padding: 10px 12px;
      font-size: 14px;
      line-height: 1.4;
      resize: none;
      outline: none;
    }
    .note::placeholder{ color: rgba(245,240,230,.55); }

    /* Decorative metal label on front of base */
    .label{
      position:absolute;
      left:50%;
      bottom: 18px;
      transform: translateX(-50%) translateZ(2px);
      width: 220px;
      height: 44px;
      border-radius: 12px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.08)),
        linear-gradient(90deg, #9b8458, var(--metal), #9b8458);
      border: 1px solid rgba(0,0,0,.25);
      box-shadow: 0 10px 18px rgba(0,0,0,.35);
      display:grid;
      place-items:center;
      color:#2b1a10;
      font-weight: 700;
      letter-spacing: .06em;
      text-transform: uppercase;
      user-select:none;
    }

    /* Accessibility focus */
    .lid:focus-visible{
      outline: 3px solid rgba(255,255,255,.55);
      outline-offset: 6px;
      border-radius: 14px;
    }

    @media (max-width:520px){
      .box{ width: 340px; height: 240px; }
      .lid{ height: 120px; }
      .label{ width: 190px; }
      .wine{ width: 150px; height: 170px; }
    }
  </style>
</head>

<body>
  <div class="scene">
    <div class="box" id="box" aria-label="木箱">
      <div class="base"></div>

      <div class="inner" aria-hidden="true">
        <!-- Simple inline SVG "wine illustration" -->
        <svg class="wine" viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="ワインのイラスト">
          <defs>
            <linearGradient id="gGlass" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#ffffff" stop-opacity="0.30"/>
              <stop offset="1" stop-color="#ffffff" stop-opacity="0.05"/>
            </linearGradient>
            <linearGradient id="gWine" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#b80e2e" stop-opacity="0.95"/>
              <stop offset="1" stop-color="#5b0012" stop-opacity="0.95"/>
            </linearGradient>
          </defs>

          <!-- bottle -->
          <path d="M128 18
                   c0 14-10 18-10 28
                   v18
                   c0 6 2 10 4 14
                   v10
                   c0 6-3 10-3 16
                   v78
                   c0 16 10 26 26 26
                   s26-10 26-26
                   v-78
                   c0-6-3-10-3-16
                   v-10
                   c2-4 4-8 4-14
                   v-18
                   c0-10-10-14-10-28
                   z"
                fill="#1b1b1f" opacity="0.92"/>
          <rect x="132" y="86" width="56" height="78" rx="12" fill="url(#gWine)" opacity="0.95"/>
          <rect x="136" y="120" width="48" height="36" rx="10" fill="#f2e7d8" opacity="0.9"/>
          <text x="160" y="144" text-anchor="middle" font-size="12" font-family="system-ui, sans-serif" fill="#3a1c12" font-weight="700">WINE</text>

          <!-- glass -->
          <path d="M52 52
                   c0 42 18 64 48 64
                   s48-22 48-64
                   c0-10-6-18-16-18
                   H68
                   c-10 0-16 8-16 18z"
                fill="url(#gGlass)" stroke="#ffffff" stroke-opacity="0.22" stroke-width="2"/>
          <path d="M78 98
                   c6 10 14 16 22 18
                   c8-2 16-8 22-18"
                fill="none" stroke="#ffffff" stroke-opacity="0.20" stroke-width="2"/>
          <path d="M70 70
                   c0 26 12 40 30 40
                   s30-14 30-40
                   z"
                fill="url(#gWine)" opacity="0.85"/>
          <rect x="97" y="116" width="6" height="46" rx="3" fill="#ffffff" opacity="0.22"/>
          <path d="M78 168
                   c0 12 18 18 22 18
                   s22-6 22-18"
                fill="none" stroke="#ffffff" stroke-opacity="0.22" stroke-width="3"/>
        </svg>
      </div>

      <div class="label">Reserve Cask</div>

      <!-- clickable lid -->
      <div class="lid" id="lid" role="button" tabindex="0" aria-expanded="false" aria-controls="note">
        <div class="face top" aria-hidden="true"></div>
        <div class="face underside">
          <textarea id="note" class="note" placeholder="ここに文字を書けます（箱の上面の裏）&#10;例：2026-01-13 / Special Reserve"></textarea>
        </div>
      </div>
    </div>

    <div class="hint">上の板（ふた）をクリック / Enter で開閉</div>
  </div>

  <script>
    const box = document.getElementById('box');
    const lid = document.getElementById('lid');

    function setOpen(nextOpen){
      box.classList.toggle('open', nextOpen);
      lid.setAttribute('aria-expanded', String(nextOpen));
      // 開いたら裏面にフォーカス（書きやすく）
      if(nextOpen){
        const note = document.getElementById('note');
        setTimeout(() => note?.focus(), 350);
      } else {
        lid.focus();
      }
    }

    function toggle(){
      setOpen(!box.classList.contains('open'));
    }

    lid.addEventListener('click', (e) => {
      // textarea操作中に誤って閉じないように、裏面のtextareaクリックは無視
      if (e.target && e.target.id === 'note') return;
      toggle();
    });

    lid.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggle();
      }
      if (e.key === 'Escape') {
        e.preventDefault();
        setOpen(false);
      }
    });
  </script>
</body>
</html>
