<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ゆめみるワインラベル</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg-gradient-top: #020617;
      --bg-gradient-bottom: #02010a;
      --accent-blue: #3b82f6;
      --accent-blue-soft: #1e3a8a;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --text-weak: #6b7280;
      --card-bg: rgba(15, 23, 42, 0.85);
      --overlay-bg: rgba(15, 23, 42, 0.8);
      --transition-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
      --transition-soft: cubic-bezier(0.25, 0.1, 0.25, 1);
      --bottle-breath-duration: 8s;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Hiragino Sans", "Noto Sans JP", sans-serif;
      color: var(--text-main);
      background: radial-gradient(circle at top, #020617 0%, #02010a 55%, #000 100%);
    }

    body {
      overflow: hidden;
    }

    /* ========== 共通レイアウト ========== */

    .app-root {
      position: relative;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 0%, #0b1120 0%, #020617 30%, #000 100%);
      display: flex;
      align-items: stretch;
      justify-content: center;
      color: var(--text-main);
      isolation: isolate;
      overflow: hidden;
      animation: appFadeIn 0.8s var(--transition-standard) forwards;
      opacity: 0;
    }

    @keyframes appFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* 微粒子ノイズ風（擬似） */
    .grain-layer {
      position: absolute;
      inset: -40px;
      pointer-events: none;
      opacity: 0.06;
      mix-blend-mode: soft-light;
      background-image:
        radial-gradient(circle at 1px 1px, rgba(255,255,255,0.25) 0, transparent 1px);
      background-size: 3px 3px;
      z-index: 1;
    }

    .content-frame {
      position: relative;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 16px 24px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: center;
      z-index: 2;
    }

    @media (min-width: 768px) {
      .content-frame {
        padding: 48px 40px 32px;
      }
    }

    /* ========== 画面状態切り替え ========== */

    .screen {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      transition:
        opacity 0.45s var(--transition-standard),
        transform 0.45s var(--transition-standard),
        visibility 0.45s var(--transition-standard);
    }

    .screen--hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transform: translateY(8px);
    }

    .screen--active {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
      transform: translateY(0);
    }

    /* ========== ホーム画面 ========== */

    .home-screen {
      align-items: center;
      justify-content: center;
    }

    .home-inner {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 32px;
    }

    .brand-title {
      text-align: center;
      font-size: 18px;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin-bottom: 12px;
    }

    .brand-subtitle {
      text-align: center;
      font-size: 13px;
      letter-spacing: 0.38em;
      text-transform: uppercase;
      color: var(--text-weak);
    }

    @media (min-width: 768px) {
      .brand-title {
        font-size: 20px;
      }
      .brand-subtitle {
        font-size: 12px;
      }
    }

    .bottle-strip-wrapper {
      width: 100%;
      padding: 32px 0 16px;
      overflow: hidden;
    }

    .bottle-strip {
      position: relative;
      width: 100%;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: min(8%, 40px);
      transform: translateY(12px);
      opacity: 0;
      animation: bottlesIntro 0.6s var(--transition-standard) 0.3s forwards;
    }

    @keyframes bottlesIntro {
      from {
        transform: translateY(18px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .bottle-item {
      position: relative;
      flex: 0 0 24%;
      max-width: 160px;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transform-origin: bottom center;
      transition:
        transform 0.35s var(--transition-standard),
        filter 0.25s var(--transition-standard),
        opacity 0.25s var(--transition-standard);
      animation: bottleBreath var(--bottle-breath-duration) ease-in-out infinite;
    }

    /* 呼吸アニメーション */
    @keyframes bottleBreath {
      0% { transform: scale(1); }
      45% { transform: scale(1.006); }
      100% { transform: scale(1); }
    }

    .bottle-item--dimmed {
      filter: brightness(0.95);
      opacity: 0.9;
    }

    .bottle-item--focused {
      filter: brightness(1.02);
      transform: translateY(-4px) scale(1.02);
    }

    .bottle-image-wrapper {
      position: relative;
      width: 100%;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    .bottle-image {
      width: 100%;
      height: auto;
      object-fit: contain;
      display: block;
      image-rendering: -webkit-optimize-contrast;
      transition: filter 0.2s var(--transition-standard),
                  transform 0.2s var(--transition-standard);
    }

    /* ぼかし大きめの足元影 */
    .bottle-shadow {
      position: absolute;
      left: 50%;
      bottom: -10px;
      width: 80%;
      max-width: 120px;
      height: 18px;
      background: radial-gradient(
        ellipse at center,
        rgba(0,0,0,0.18) 0%,
        rgba(0,0,0,0.0) 60%
      );
      transform: translateX(-50%);
      filter: blur(8px);
      opacity: 0;
      animation: shadowIntro 0.4s var(--transition-standard) 0.45s forwards;
    }

    @keyframes shadowIntro {
      from { opacity: 0; transform: translateX(-50%) translateY(4px); }
      to   { opacity: 1; transform: translateX(-50%) translateY(0); }
    }

    /* 足元のぼかし反射 */
    .bottle-reflection {
      position: absolute;
      left: 50%;
      bottom: -16px;
      width: 40%;
      max-width: 64px;
      height: 14px;
      background: radial-gradient(
        ellipse at center,
        rgba(148, 163, 184, 0.15) 0%,
        rgba(148, 163, 184, 0.0) 70%
      );
      transform: translateX(-50%) scaleY(0.6);
      filter: blur(12px);
      opacity: 0.5;
      pointer-events: none;
    }

    /* 右下の点ボタン */
    .home-floating-dots {
      position: absolute;
      right: 18px;
      bottom: 18px;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #60a5fa 0%, #1d4ed8 45%, #020617 100%);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 0 8px rgba(56,189,248,0.3);
      cursor: pointer;
      opacity: 0;
      transform: scale(0.8);
      animation: dotButtonIntro 0.45s var(--transition-standard) 0.5s forwards;
    }

    @keyframes dotButtonIntro {
      from { opacity: 0; transform: scale(0.7); }
      to   { opacity: 1; transform: scale(1); }
    }

    .home-floating-dots::before {
      content: "";
      position: absolute;
      inset: -10px;
      border-radius: inherit;
      border: 1px solid rgba(148,163,184,0.1);
      pointer-events: none;
    }

    .home-floating-dots:hover {
      box-shadow:
        0 0 0 1px rgba(37,99,235,0.9),
        0 0 16px rgba(56,189,248,0.4);
    }

    /* ページングドット（任意視覚） */
    .pager-dots {
      margin-top: 8px;
      display: flex;
      gap: 4px;
      justify-content: center;
    }
    .pager-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: rgba(148,163,184,0.25);
      transition: background 0.25s var(--transition-standard), transform 0.25s var(--transition-standard);
    }
    .pager-dot--active {
      background: #60a5fa;
      transform: scale(1.4);
    }

    /* ========== QR オーバーレイ ========== */

    .overlay {
      position: fixed;
      inset: 0;
      background: var(--overlay-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition:
        opacity 0.4s var(--transition-standard),
        visibility 0.4s var(--transition-standard);
      z-index: 20;
    }

    .overlay--open {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    .overlay-inner {
      width: 100%;
      max-width: 640px;
      padding: 24px 16px 18px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.96) 0%, rgba(2,6,23,0.98) 60%, rgba(15,23,42,0.98) 100%);
      border-radius: 20px;
      border: 1px solid rgba(148,163,184,0.18);
      box-shadow:
        0 22px 60px rgba(15,23,42,0.85),
        0 0 0 1px rgba(15,23,42,1);
      transform: translateY(8px);
      opacity: 0;
      transition:
        opacity 0.5s var(--transition-standard),
        transform 0.5s var(--transition-standard);
    }

    .overlay--open .overlay-inner {
      opacity: 1;
      transform: translateY(0);
    }

    .overlay-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }
    .overlay-title {
      font-size: 14px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-soft);
    }
    .overlay-close {
      cursor: pointer;
      font-size: 12px;
      color: var(--text-weak);
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.6);
      border: 1px solid rgba(148,163,184,0.25);
      transition:
        background 0.2s var(--transition-standard),
        color 0.2s var(--transition-standard),
        border-color 0.2s var(--transition-standard);
    }
    .overlay-close:hover {
      background: rgba(55,65,81,0.7);
      color: var(--text-main);
      border-color: rgba(156,163,175,0.8);
    }

    .overlay-bottle-list {
      display: flex;
      flex-wrap: nowrap;
      gap: 18px;
      overflow-x: auto;
      padding: 6px 4px 4px;
      scrollbar-width: none;
    }
    .overlay-bottle-list::-webkit-scrollbar {
      display: none;
    }

    .overlay-bottle {
      position: relative;
      flex: 0 0 84px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }
    .overlay-bottle-img-wrap {
      position: relative;
      width: 60px;
      height: 120px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }
    .overlay-bottle-img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .overlay-bottle-shadow {
      position: absolute;
      left: 50%;
      bottom: -8px;
      width: 70%;
      height: 14px;
      transform: translateX(-50%);
      background: radial-gradient(
        ellipse at center,
        rgba(15,23,42,0.55) 0%,
        rgba(15,23,42,0) 60%
      );
      filter: blur(6px);
      opacity: 0.9;
    }
    .overlay-qr-icon {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--text-soft);
      cursor: pointer;
      background: rgba(15,23,42,0.9);
      backdrop-filter: blur(8px);
      transition:
        background 0.2s var(--transition-standard),
        border-color 0.2s var(--transition-standard),
        color 0.2s var(--transition-standard),
        transform 0.25s var(--transition-standard);
    }
    .overlay-qr-icon:hover {
      border-color: #60a5fa;
      color: #bfdbfe;
      background: rgba(15,23,42,0.95);
      transform: translateY(-1px);
    }

    .overlay-footer-note {
      margin-top: 14px;
      font-size: 11px;
      color: var(--text-weak);
      text-align: right;
    }

    /* ========== wineXp 画面 ========== */

    .winexp-screen {
      padding: 32px 16px 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    @media (min-width: 768px) {
      .winexp-screen {
        padding: 40px 36px 24px;
      }
    }

    /* 背景層（島 + 夜） */
    .winexp-bg-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
      opacity: 0.96;
      background:
        radial-gradient(circle at 10% -10%, #1e293b 0%, transparent 40%),
        radial-gradient(circle at 100% 0%, #020617 0%, transparent 55%),
        radial-gradient(circle at 50% 100%, #020617 0%, #000 60%);
      transition:
        filter 0.65s var(--transition-soft),
        background 0.65s var(--transition-soft);
    }

    /* 深夜限定演出の星 */
    .night-stars {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.2s var(--transition-soft);
      background-image:
        radial-gradient(circle at 10% 20%, rgba(248,250,252,0.65) 0, transparent 1px),
        radial-gradient(circle at 70% 40%, rgba(248,250,252,0.9) 0, transparent 1px),
        radial-gradient(circle at 30% 70%, rgba(248,250,252,0.75) 0, transparent 1px),
        radial-gradient(circle at 80% 80%, rgba(248,250,252,0.45) 0, transparent 1px);
      background-size: 260px 260px;
      mix-blend-mode: screen;
    }

    .night-stars--visible {
      opacity: 0.6;
      animation: starDrift 18s linear infinite alternate;
    }

    @keyframes starDrift {
      from { transform: translate3d(0, 0, 0); }
      to   { transform: translate3d(-10px, -12px, 0); }
    }

    /* ファーストビュー：ワイン名エリア */
    .winexp-header-space {
      min-height: 32vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding-top: 16px;
    }

    .winexp-label {
      font-size: 11px;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: var(--text-weak);
      margin-bottom: 14px;
    }

    .winexp-title-jp {
      font-size: 26px;
      letter-spacing: 0.06em;
      margin-bottom: 8px;
      opacity: 0;
      transform: scale(1.02) translateY(4px);
      animation: winexpTitleIn 1s ease-out forwards;
      animation-delay: 1.0s;
    }

    @keyframes winexpTitleIn {
      from { opacity: 0; transform: scale(1.02) translateY(4px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }

    .winexp-title-en {
      font-size: 12px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--text-soft);
      opacity: 0;
      transform: translateY(5px);
      animation: winexpSubtitleIn 0.8s var(--transition-standard) forwards;
      animation-delay: 1.4s;
    }

    @keyframes winexpSubtitleIn {
      from { opacity: 0; transform: translateY(5px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .winexp-tagline {
      margin-top: 22px;
      font-size: 13px;
      color: var(--text-soft);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0;
      transform: translateY(6px);
      animation: winexpTaglineIn 0.8s var(--transition-standard) forwards;
      animation-delay: 2.0s;
    }

    @keyframes winexpTaglineIn {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* 2.5秒までは「眺める時間」 */
    .winexp-screen--locked-interaction {
      pointer-events: none;
    }

    /* Q1〜Q7：基本情報エリア */
    .winexp-section {
      margin-top: 36px;
    }

    .info-block {
      margin-bottom: 18px;
      opacity: 0;
      transform: translateY(12px);
      transition:
        opacity 0.45s var(--transition-standard),
        transform 0.45s var(--transition-standard);
    }

    .info-block--visible {
      opacity: 1;
      transform: translateY(0);
    }

    .info-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-weak);
      margin-bottom: 6px;
    }

    .info-value {
      font-size: 15px;
      letter-spacing: 0.06em;
      color: var(--text-main);
    }

    /* Q8・Q9：世界観ゾーン */
    .world-section {
      margin-top: 44px;
      padding: 32px 18px 30px;
      border-radius: 22px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.96) 0%, rgba(2,6,23,0.96) 45%, rgba(2,6,23,0.98) 100%);
      border: 1px solid rgba(51,65,85,0.7);
      box-shadow:
        0 24px 60px rgba(15,23,42,0.85),
        0 0 0 1px rgba(15,23,42,0.9);
      position: relative;
      overflow: hidden;
    }

    .world-section::before {
      content: "";
      position: absolute;
      inset: -30%;
      background:
        radial-gradient(circle at 20% 0%, rgba(59,130,246,0.16) 0%, transparent 60%),
        radial-gradient(circle at 60% 100%, rgba(30,64,175,0.14) 0%, transparent 60%);
      mix-blend-mode: screen;
      opacity: 0;
      transition: opacity 0.6s var(--transition-standard);
    }

    .world-section--active::before {
      opacity: 1;
    }

    .world-line-primary,
    .world-line-secondary {
      text-align: center;
      font-size: 15px;
      letter-spacing: 0.1em;
      color: var(--text-main);
      opacity: 0;
      transform: translateY(8px);
      transition:
        opacity 0.9s var(--transition-soft),
        transform 0.9s var(--transition-soft);
    }

    .world-line-primary {
      margin-bottom: 18px;
    }

    .world-line-secondary {
      font-size: 14px;
      color: var(--text-soft);
    }

    .world-line-primary--visible,
    .world-line-secondary--visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Q10：誕生日メッセージゾーン */
    .message-section {
      margin-top: 44px;
    }

    .message-wax {
      width: 72px;
      height: 72px;
      border-radius: 999px;
      margin: 0 auto 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      background:
        radial-gradient(circle at 20% 10%, #1d4ed8 0%, #1e40af 45%, #020617 100%);
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 12px 25px rgba(15,23,42,0.9),
        0 0 22px rgba(37,99,235,0.5);
      color: #e5e7eb;
      font-size: 11px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      cursor: pointer;
      opacity: 0;
      transform: scale(0.92) translateY(4px);
      transition:
        opacity 0.6s var(--transition-standard),
        transform 1.2s var(--transition-soft),
        box-shadow 0.4s var(--transition-standard);
    }

    .message-wax--visible {
      opacity: 1;
      transform: scale(1) translateY(0);
    }

    .message-wax:hover {
      box-shadow:
        0 0 0 1px rgba(96,165,250,0.9),
        0 20px 40px rgba(15,23,42,1),
        0 0 32px rgba(96,165,250,0.7);
    }

    .message-card {
      max-width: 520px;
      margin: 0 auto;
      border-radius: 22px;
      border: 1px solid rgba(148,163,184,0.55);
      background:
        linear-gradient(145deg, rgba(17,24,39,0.96), rgba(15,23,42,0.98));
      box-shadow:
        0 24px 60px rgba(15,23,42,0.9),
        0 0 0 1px rgba(15,23,42,0.9);
      padding: 18px 18px 20px;
      overflow: hidden;
      transform-origin: top center;
      transform: scaleY(0.82);
      max-height: 0;
      opacity: 0;
      transition:
        transform 0.7s var(--transition-soft),
        max-height 0.7s var(--transition-soft),
        opacity 0.7s var(--transition-soft),
        padding-top 0.7s var(--transition-soft),
        padding-bottom 0.7s var(--transition-soft),
        margin-top 0.7s var(--transition-soft);
    }

    .message-card--open {
      transform: scaleY(1);
      max-height: 420px;
      opacity: 1;
      padding-top: 20px;
      padding-bottom: 22px;
      margin-top: 6px;
    }

    .message-line {
      font-size: 14px;
      color: var(--text-main);
      line-height: 1.7;
      opacity: 0;
      transform: translateY(4px);
    }

    .message-line + .message-line {
      margin-top: 6px;
    }

    .message-line--visible {
      opacity: 1;
      transform: translateY(0);
      transition:
        opacity 0.35s var(--transition-standard),
        transform 0.35s var(--transition-standard);
    }

    /* Q11〜Q13：折りたたみセクション */
    .accordion-list {
      margin-top: 44px;
      border-top: 1px solid rgba(55,65,81,0.7);
    }

    .accordion-item {
      border-bottom: 1px solid rgba(55,65,81,0.7);
    }

    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 4px;
      cursor: pointer;
      gap: 12px;
    }

    .accordion-label-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .accordion-icon {
      font-size: 16px;
    }

    .accordion-title {
      font-size: 14px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .accordion-arrow {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(75,85,99,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--text-weak);
      transition:
        transform 0.3s var(--transition-standard),
        background 0.3s var(--transition-standard),
        color 0.3s var(--transition-standard);
    }

    .accordion-item--open .accordion-arrow {
      transform: rotate(90deg);
      background: rgba(31,41,55,0.9);
      color: var(--text-main);
    }

    .accordion-body {
      max-height: 0;
      overflow: hidden;
      padding: 0 4px;
      transition:
        max-height 0.35s var(--transition-standard),
        padding-bottom 0.35s var(--transition-standard);
    }

    .accordion-item--open .accordion-body {
      padding-bottom: 12px;
      max-height: 260px;
    }

    .accordion-text {
      font-size: 13px;
      color: var(--text-main);
      line-height: 1.8;
      white-space: pre-line;
    }

    /* ========== ホームへ戻るボタン（右中央） ========== */

    .home-button {
      position: fixed;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(75,85,99,0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 18;
      opacity: 0;
      pointer-events: none;
      transition:
        opacity 0.2s var(--transition-standard),
        transform 0.2s var(--transition-standard),
        background 0.2s var(--transition-standard),
        border-color 0.2s var(--transition-standard);
    }

    .home-button--visible {
      opacity: 1;
      pointer-events: auto;
    }

    .home-button:hover {
      background: rgba(31,41,55,0.95);
      border-color: rgba(148,163,184,0.9);
      transform: translateY(-50%) scale(1.03);
    }

    .home-button-icon {
      width: 10px;
      height: 10px;
      border-radius: 2px;
      border: 1px solid rgba(209,213,219,0.9);
      position: relative;
    }
    .home-button-icon::after {
      content: "";
      position: absolute;
      left: 50%;
      top: -5px;
      width: 8px;
      height: 5px;
      border-left: 1px solid rgba(209,213,219,0.9);
      border-top: 1px solid rgba(209,213,219,0.9);
      border-right: 1px solid rgba(209,213,219,0.9);
      border-radius: 3px 3px 0 0;
      transform: translateX(-50%);
    }

    /* 深夜・再訪演出：星とメッセージ */
    .revisit-badge {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%) translateY(12px);
      padding: 4px 12px 5px;
      border-radius: 999px;
      background: radial-gradient(circle at 0 0, rgba(59,130,246,0.75) 0%, rgba(2,6,23,0.98) 35%);
      border: 1px solid rgba(59,130,246,0.5);
      color: #e5e7eb;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      opacity: 0;
      pointer-events: none;
      box-shadow:
        0 0 0 1px rgba(15,23,42,0.9),
        0 10px 30px rgba(15,23,42,0.9);
      z-index: 17;
      white-space: nowrap;
    }

    .revisit-badge--visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      transition:
        opacity 0.8s var(--transition-standard),
        transform 0.8s var(--transition-standard);
    }

    .revisit-star {
      font-size: 12px;
    }

    .revisit-text {
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    @media (max-width: 480px) {
      .revisit-badge {
        font-size: 10px;
      }
    }

  </style>
</head>
<body>
  <div class="app-root">
    <div class="grain-layer"></div>

    <!-- ホーム / wineXp 切り替え用の2画面 -->
    <div class="screen home-screen screen--active" id="home-screen">
      <div class="content-frame">
        <div class="home-inner">
          <header>
            <div class="brand-title">YUMEMIRU VINEYARD</div>
            <div class="brand-subtitle">ISLAND BOTTLE ARCHIVES</div>
          </header>

          <section class="bottle-strip-wrapper">
            <div class="bottle-strip" id="bottle-strip">
              <!-- JS で bottle-item を挿入 -->
            </div>
            <div class="pager-dots" id="pager-dots"></div>
          </section>
        </div>
      </div>

      <!-- 右下の点ボタン -->
      <div class="home-floating-dots" id="qr-toggle"></div>
    </div>

    <div class="screen winexp-screen screen--hidden" id="winexp-screen">
      <div class="winexp-bg-layer" id="winexp-bg-layer"></div>
      <div class="night-stars" id="night-stars"></div>

      <div class="content-frame winexp-content">
        <div class="winexp-header-space">
          <div class="winexp-label">Wine</div>
          <div class="winexp-title-jp" id="winexp-title-jp"></div>
          <div class="winexp-title-en" id="winexp-title-en"></div>
          <div class="winexp-tagline" id="winexp-tagline"></div>
        </div>

        <section class="winexp-section" id="basic-info-section">
          <!-- Q1〜Q7 基本情報を JS で -->
        </section>

        <section class="world-section" id="world-section">
          <div class="world-line-primary" id="world-line-primary"></div>
          <div class="world-line-secondary" id="world-line-secondary"></div>
        </section>

        <section class="message-section">
          <div class="message-wax" id="message-wax">Message</div>
          <div class="message-card" id="message-card">
            <div class="message-line" data-line-index="0"></div>
            <div class="message-line" data-line-index="1"></div>
            <div class="message-line" data-line-index="2"></div>
          </div>
        </section>

        <section class="accordion-list" id="accordion-list">
          <!-- Q11〜Q13 を JS で -->
        </section>
      </div>
    </div>

    <!-- 常時UI：ホームボタン -->
    <div class="home-button" id="home-button">
      <div class="home-button-icon"></div>
    </div>

    <!-- 深夜 / 再訪バッジ -->
    <div class="revisit-badge" id="revisit-badge">
      <span class="revisit-star">★</span>
      <span class="revisit-text" id="revisit-text">SECOND POUR</span>
    </div>

    <!-- QR オーバーレイ -->
    <div class="overlay" id="qr-overlay">
      <div class="overlay-inner">
        <div class="overlay-header">
          <div class="overlay-title">Bottle Index</div>
          <div class="overlay-close" id="qr-close">Close</div>
        </div>
        <div class="overlay-bottle-list" id="overlay-bottle-list">
          <!-- JSでボトル一覧を生成 -->
        </div>
        <div class="overlay-footer-note">Tap the icon to save/share the QR.</div>
      </div>
    </div>
  </div>

  <script>
    /************************************************************
     *  データ構造：ここを書き換えるだけでワイン追加
     *  bottleImage, qrImage はフルURLを記述
     ************************************************************/

    const wines = [
      {
        id: "wine1",
        bottleImage: "https://raw.githubusercontent.com/yumemiru28000/yumemirusougenn/main/wine1.png",
        qrImage: "https://raw.githubusercontent.com/yumemiru28000/yumemirusougenn/main/wine1_qr.png",

        // Q1〜Q13（すべて文字。必要に応じて中身変更）
        q1_name: "青の安らぎ",
        q2_producer: "ユメミるワイナリー",
        q3_origin: "ズズにゃん島",
        q4_variety: "夢葡萄 100%",
        q5_vintage: "2026",
        q6_style: "Still / Dry",
        q7_alcohol: "12.5%",

        q8_world_phrase: "穏やかな波のような安寧",
        q9_world_line: "静けさと安らぎをあなたに",

        q10_message_lines: [
          "お誕生日おめでとうございます。",
          "この一杯が、あなたの新しい一年をやさしく照らしますように。",
          "島の夜風とともに、静かな祝福を。"
        ],

        q11_pairing: "白身魚のカルパッチョ、レモン香るチーズタルト、ハーブをきかせたチキンソテーなど、静かな夜に寄り添う一皿とともに。",
        q12_storage: "直射日光を避け、15〜18℃前後の穏やかな場所で。開栓後は静かな冷蔵庫で2〜3日を目安にお楽しみください。",
        q13_craft: "ズズにゃん島の風と潮騒を閉じ込めるように、低温でゆっくりと発酵。余計な手を加えず、夜の静けさだけをグラスに残しました。",

        // サブ英字タイトル、タグラインなど
        display_en: "CALM OF BLUE",
        tagline: "ISLAND NIGHT SELECTION",

        openCount: 0
      },

      // 例：ワインを増やす場合はここに同じ構造で追加
      /*
      {
        id: "wine2",
        bottleImage: "https://raw.githubusercontent.com/yumemiru28000/yumemirusougenn/main/wine2.png",
        qrImage: "https://raw.githubusercontent.com/yumemiru28000/yumemirusougenn/main/wine2_qr.png",
        q1_name: "赤のささやき",
        ...
      }
      */
    ];

    /************************************************************
     *  状態管理
     ************************************************************/

    let currentIndex = 0;       // 今ホームで中央にいる wine の index
    let activeWineIndex = null; // wineXp で開いているワイン
    let homeIsVisible = true;   // 画面状態
    let interactionLocked = false; // wineXp 初期2.5秒は true
    let revisitCountKeyPrefix = "wine-open-count-"; // localStorage key prefix

    /************************************************************
     *  DOM 取得
     ************************************************************/

    const homeScreen = document.getElementById("home-screen");
    const winexpScreen = document.getElementById("winexp-screen");
    const bottleStrip = document.getElementById("bottle-strip");
    const pagerDots = document.getElementById("pager-dots");
    const qrToggle = document.getElementById("qr-toggle");
    const qrOverlay = document.getElementById("qr-overlay");
    const qrClose = document.getElementById("qr-close");
    const overlayBottleList = document.getElementById("overlay-bottle-list");

    const winexpTitleJp = document.getElementById("winexp-title-jp");
    const winexpTitleEn = document.getElementById("winexp-title-en");
    const winexpTagline = document.getElementById("winexp-tagline");
    const basicInfoSection = document.getElementById("basic-info-section");
    const worldSection = document.getElementById("world-section");
    const worldLinePrimary = document.getElementById("world-line-primary");
    const worldLineSecondary = document.getElementById("world-line-secondary");
    const messageWax = document.getElementById("message-wax");
    const messageCard = document.getElementById("message-card");
    const accordionList = document.getElementById("accordion-list");
    const winexpBgLayer = document.getElementById("winexp-bg-layer");
    const nightStars = document.getElementById("night-stars");
    const homeButton = document.getElementById("home-button");
    const revisitBadge = document.getElementById("revisit-badge");
    const revisitText = document.getElementById("revisit-text");

    /************************************************************
     *  ホーム画面のボトル表示
     ************************************************************/

    function renderHomeBottles() {
      bottleStrip.innerHTML = "";
      pagerDots.innerHTML = "";

      const maxVisible = 3;
      let start = Math.max(0, currentIndex - 1);
      if (start + maxVisible > wines.length) {
        start = Math.max(0, wines.length - maxVisible);
      }
      const end = Math.min(wines.length, start + maxVisible);

      for (let i = start; i < end; i++) {
        const wine = wines[i];
        const item = document.createElement("div");
        item.className = "bottle-item";
        if (i === currentIndex) {
          item.classList.add("bottle-item--focused");
        } else {
          item.classList.add("bottle-item--dimmed");
        }
        // 呼吸アニメーションの開始時間をずら

